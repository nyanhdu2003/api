2025-04-12 16:50:52.014 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 16:50:52.062 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 16:50:52.101 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 16:50:52.178 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 16:50:52.196 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 16:50:52.198 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 16:50:52.212 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 16:50:52.224 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 16:50:52.233 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 16:50:52.292 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 16:50:52.292 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 16:50:52.293 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 16:50:52.298 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 16:50:52.300 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 16:50:52.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 16:50:52.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 16:50:52.302 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 16:50:52.303 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 16:50:52.504 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 16:50:52.594 +07:00 [INF] User profile is available. Using 'C:\Users\hungp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-12 16:50:52.678 +07:00 [INF] Now listening on: http://localhost:5269
2025-04-12 16:50:52.680 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-12 16:50:52.681 +07:00 [INF] Hosting environment: Development
2025-04-12 16:50:52.681 +07:00 [INF] Content root path: C:\Users\hungp\Fsoft\ASP.NET CORE\web\api\QuizApp.WebAPI
2025-04-12 16:50:52.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger - null null
2025-04-12 16:50:52.906 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger - 301 0 null 48.9329ms
2025-04-12 16:50:52.912 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 16:50:52.992 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 79.3896ms
2025-04-12 16:50:53.010 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/swagger-ui.css - null null
2025-04-12 16:50:53.020 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.css - null null
2025-04-12 16:50:53.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 16:50:53.024 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/swagger-ui-bundle.js - null null
2025-04-12 16:50:53.026 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 1.5116ms
2025-04-12 16:50:53.027 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 16:50:53.028 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 1.4248ms
2025-04-12 16:50:53.030 +07:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2025-04-12 16:50:53.031 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.css - 200 202 text/css 10.2523ms
2025-04-12 16:50:53.037 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/swagger-ui-standalone-preset.js - null null
2025-04-12 16:50:53.038 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-04-12 16:50:53.040 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/swagger-ui.css - 200 154948 text/css 30.2245ms
2025-04-12 16:50:53.041 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-04-12 16:50:53.041 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/swagger-ui-standalone-preset.js - 200 229223 text/javascript 4.7068ms
2025-04-12 16:50:53.061 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-04-12 16:50:53.061 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/swagger-ui-bundle.js - 200 1466324 text/javascript 36.6664ms
2025-04-12 16:50:55.162 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 16:50:55.262 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.3137ms
2025-04-12 16:51:12.037 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/roles - null null
2025-04-12 16:51:12.045 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-12 16:51:12.105 +07:00 [INF] Executing endpoint 'QuizApp.WebAPI.Controllers.RoleController.GetAllRoles (QuizApp.WebAPI)'
2025-04-12 16:51:12.139 +07:00 [INF] Route matched with {action = "GetAllRoles", controller = "Role"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRoles() on controller QuizApp.WebAPI.Controllers.RoleController (QuizApp.WebAPI).
2025-04-12 16:51:12.392 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [r].[Description], [r].[IsActive]
FROM [Roles] AS [r]
2025-04-12 16:51:12.405 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[QuizApp.Business.ViewModels.RoleViewModel, QuizApp.Business, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-12 16:51:12.473 +07:00 [INF] Executed action QuizApp.WebAPI.Controllers.RoleController.GetAllRoles (QuizApp.WebAPI) in 325.6064ms
2025-04-12 16:51:12.474 +07:00 [INF] Executed endpoint 'QuizApp.WebAPI.Controllers.RoleController.GetAllRoles (QuizApp.WebAPI)'
2025-04-12 16:51:12.480 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/roles - 200 null application/json; charset=utf-8 442.7332ms
2025-04-12 16:58:26.748 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 16:58:26.750 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 1.6177ms
2025-04-12 16:58:26.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 16:58:26.787 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 1.7289ms
2025-04-12 16:58:26.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 16:58:26.798 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 0.4455ms
2025-04-12 16:58:28.710 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 16:58:28.723 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.5121ms
2025-04-12 16:58:28.740 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/favicon-32x32.png - null null
2025-04-12 16:58:28.740 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-04-12 16:58:28.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/favicon-32x32.png - 200 628 image/png 0.819ms
2025-04-12 16:58:43.698 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 16:58:43.699 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 0.825ms
2025-04-12 16:58:43.714 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 16:58:43.714 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 0.7881ms
2025-04-12 16:58:43.718 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 16:58:43.718 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 0.6023ms
2025-04-12 16:58:45.194 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 16:58:45.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.9281ms
2025-04-12 17:02:56.429 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 17:02:56.430 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 0.874ms
2025-04-12 17:02:56.441 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 17:02:56.444 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 3.0907ms
2025-04-12 17:02:56.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 17:02:56.475 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 17:02:56.475 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 0.5509ms
2025-04-12 17:02:56.476 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 0.4744ms
2025-04-12 17:02:59.168 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 17:02:59.178 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.8018ms
2025-04-12 17:03:55.788 +07:00 [INF] Application is shutting down...
2025-04-12 17:04:40.589 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:04:40.649 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:04:40.683 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:04:40.738 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:04:40.745 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:04:40.747 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:04:40.757 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:04:40.769 +07:00 [INF] Applying migration '20250412100412_AddRolesAndUserRoles'.
2025-04-12 17:04:40.787 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250412100412_AddRolesAndUserRoles', N'9.0.3');
2025-04-12 17:04:40.794 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:05:11.774 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:05:11.822 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:05:11.845 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:05:11.902 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:05:11.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:05:11.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:05:11.928 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:05:11.936 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 17:05:11.940 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:05:11.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:05:11.986 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:05:11.987 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:05:11.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:05:11.994 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:05:11.995 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:05:11.996 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:05:11.996 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 17:05:11.997 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:05:12.170 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:05:12.252 +07:00 [INF] User profile is available. Using 'C:\Users\hungp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-12 17:05:12.332 +07:00 [INF] Now listening on: http://localhost:5269
2025-04-12 17:05:12.335 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-12 17:05:12.335 +07:00 [INF] Hosting environment: Development
2025-04-12 17:05:12.335 +07:00 [INF] Content root path: C:\Users\hungp\Fsoft\ASP.NET CORE\web\api\QuizApp.WebAPI
2025-04-12 17:05:12.549 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 17:05:12.721 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 175.1542ms
2025-04-12 17:05:12.736 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 17:05:12.737 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 17:05:12.739 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 2.5345ms
2025-04-12 17:05:12.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 7.9223ms
2025-04-12 17:05:15.126 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 17:05:15.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 76.7005ms
2025-04-12 17:07:41.809 +07:00 [INF] Application is shutting down...
2025-04-12 17:07:56.699 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:07:59.880 +07:00 [INF] Executed DbCommand (3,109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [QuizApp_dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-04-12 17:08:00.085 +07:00 [INF] Executed DbCommand (196ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [QuizApp_dev];
2025-04-12 17:08:09.851 +07:00 [INF] Executed DbCommand (259ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [QuizApp_dev];
2025-04-12 17:08:09.987 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [QuizApp_dev] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-04-12 17:08:10.021 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:08:10.028 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:08:10.063 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:08:10.121 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:08:10.130 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:08:10.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:08:10.145 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:08:10.155 +07:00 [INF] Applying migration '20250312110459_AddAllModelsWithRelationshippAndSeedingAllData'.
2025-04-12 17:08:10.212 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] uniqueidentifier NOT NULL,
    [Description] nvarchar(50) NOT NULL,
    [IsActive] bit NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-04-12 17:08:10.217 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Questions] (
    [Id] uniqueidentifier NOT NULL,
    [Content] nvarchar(max) NOT NULL,
    [QuestionType] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Questions] PRIMARY KEY ([Id])
);
2025-04-12 17:08:10.221 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quizzes] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(255) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Duration] int NOT NULL,
    [ThumbnailUrl] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Quizzes] PRIMARY KEY ([Id])
);
2025-04-12 17:08:10.231 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [DateOfBirth] datetime2 NOT NULL,
    [Avatar] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-04-12 17:08:10.238 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] uniqueidentifier NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.244 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Answers] (
    [Id] uniqueidentifier NOT NULL,
    [Content] nvarchar(255) NOT NULL,
    [IsCorrect] bit NOT NULL,
    [IsActive] bit NOT NULL,
    [QuestionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Answers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Answers_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.250 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuizQuestion] (
    [QuizId] uniqueidentifier NOT NULL,
    [QuestionId] uniqueidentifier NOT NULL,
    [Order] int NOT NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_QuizQuestion] PRIMARY KEY ([QuizId], [QuestionId]),
    CONSTRAINT [FK_QuizQuestion_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_QuizQuestion_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.255 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] uniqueidentifier NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.261 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.266 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.272 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] uniqueidentifier NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.278 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] uniqueidentifier NOT NULL,
    [UsersId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_AspNetRoles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.282 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserQuizz] (
    [UserId] uniqueidentifier NOT NULL,
    [QuizId] uniqueidentifier NOT NULL,
    [QuizCode] nvarchar(10) NOT NULL,
    [StartAt] datetime2 NULL,
    [FinishAt] datetime2 NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserQuizz] PRIMARY KEY ([UserId], [QuizId]),
    CONSTRAINT [FK_UserQuizz_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserQuizz_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:10.292 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserAnswers] (
    [UserQuizId] uniqueidentifier NOT NULL,
    [AnswerId] uniqueidentifier NOT NULL,
    [QuestionId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [QuizId] uniqueidentifier NOT NULL,
    [IsCorrect] bit NOT NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserAnswers] PRIMARY KEY ([UserQuizId], [AnswerId], [QuestionId]),
    CONSTRAINT [FK_UserAnswers_Answers_AnswerId] FOREIGN KEY ([AnswerId]) REFERENCES [Answers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_UserAnswers_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_UserAnswers_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserAnswers_UserQuizz_UserId_QuizId] FOREIGN KEY ([UserId], [QuizId]) REFERENCES [UserQuizz] ([UserId], [QuizId])
);
2025-04-12 17:08:10.299 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Answers_QuestionId] ON [Answers] ([QuestionId]);
2025-04-12 17:08:10.302 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-04-12 17:08:10.309 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-04-12 17:08:10.311 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-04-12 17:08:10.315 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-04-12 17:08:10.318 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-04-12 17:08:10.321 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizQuestion_QuestionId] ON [QuizQuestion] ([QuestionId]);
2025-04-12 17:08:10.323 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2025-04-12 17:08:10.326 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_AnswerId] ON [UserAnswers] ([AnswerId]);
2025-04-12 17:08:10.329 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_QuestionId] ON [UserAnswers] ([QuestionId]);
2025-04-12 17:08:10.332 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_QuizId] ON [UserAnswers] ([QuizId]);
2025-04-12 17:08:10.335 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_UserId_QuizId] ON [UserAnswers] ([UserId], [QuizId]);
2025-04-12 17:08:10.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserQuizz_QuizId] ON [UserQuizz] ([QuizId]);
2025-04-12 17:08:10.341 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-04-12 17:08:10.346 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-04-12 17:08:10.352 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250312110459_AddAllModelsWithRelationshippAndSeedingAllData', N'9.0.3');
2025-04-12 17:08:10.354 +07:00 [INF] Applying migration '20250312184737_AddUserRoleModel'.
2025-04-12 17:08:10.390 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestion] DROP CONSTRAINT [FK_QuizQuestion_Questions_QuestionId];
2025-04-12 17:08:10.394 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestion] DROP CONSTRAINT [FK_QuizQuestion_Quizzes_QuizId];
2025-04-12 17:08:10.403 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestion] DROP CONSTRAINT [PK_QuizQuestion];
2025-04-12 17:08:11.245 +07:00 [INF] Executed DbCommand (840ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[QuizQuestion]', N'QuizQuestions', 'OBJECT';
2025-04-12 17:08:11.256 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[QuizQuestions].[IX_QuizQuestion_QuestionId]', N'IX_QuizQuestions_QuestionId', 'INDEX';
2025-04-12 17:08:11.270 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestions] ADD CONSTRAINT [PK_QuizQuestions] PRIMARY KEY ([QuizId], [QuestionId]);
2025-04-12 17:08:11.282 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRoles] (
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_UserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:08:11.288 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_RoleId] ON [UserRoles] ([RoleId]);
2025-04-12 17:08:11.297 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestions] ADD CONSTRAINT [FK_QuizQuestions_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE;
2025-04-12 17:08:11.303 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestions] ADD CONSTRAINT [FK_QuizQuestions_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE;
2025-04-12 17:08:11.307 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250312184737_AddUserRoleModel', N'9.0.3');
2025-04-12 17:08:11.313 +07:00 [INF] Applying migration '20250323182531_FixRelations'.
2025-04-12 17:08:11.352 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetRoleClaims] DROP CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId];
2025-04-12 17:08:11.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUserRoles] DROP CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId];
2025-04-12 17:08:11.360 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUser] DROP CONSTRAINT [FK_RoleUser_AspNetRoles_RolesId];
2025-04-12 17:08:11.364 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] DROP CONSTRAINT [FK_UserAnswers_Quizzes_QuizId];
2025-04-12 17:08:11.368 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] DROP CONSTRAINT [FK_UserAnswers_UserQuizz_UserId_QuizId];
2025-04-12 17:08:11.372 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [UserQuizz];
2025-04-12 17:08:11.377 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [UserRoles];
2025-04-12 17:08:11.383 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] DROP CONSTRAINT [PK_UserAnswers];
2025-04-12 17:08:11.387 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_UserAnswers_QuizId] ON [UserAnswers];
2025-04-12 17:08:11.391 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_UserAnswers_UserId_QuizId] ON [UserAnswers];
2025-04-12 17:08:11.397 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetRoles] DROP CONSTRAINT [PK_AspNetRoles];
2025-04-12 17:08:11.448 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[UserAnswers]') AND [c].[name] = N'UserQuizId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [UserAnswers] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [UserAnswers] DROP COLUMN [UserQuizId];
2025-04-12 17:08:11.453 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[AspNetRoles]', N'Roles', 'OBJECT';
2025-04-12 17:08:11.457 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUserRoles] ADD [Discriminator] nvarchar(34) NOT NULL DEFAULT N'';
2025-04-12 17:08:11.463 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] ADD CONSTRAINT [PK_UserAnswers] PRIMARY KEY ([UserId], [QuizId], [AnswerId], [QuestionId]);
2025-04-12 17:08:11.470 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Roles] ADD CONSTRAINT [PK_Roles] PRIMARY KEY ([Id]);
2025-04-12 17:08:11.477 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserQuizzes] (
    [UserId] uniqueidentifier NOT NULL,
    [QuizId] uniqueidentifier NOT NULL,
    [QuizCode] nvarchar(10) NOT NULL,
    [StartAt] datetime2 NULL,
    [FinishAt] datetime2 NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserQuizzes] PRIMARY KEY ([UserId], [QuizId]),
    CONSTRAINT [FK_UserQuizzes_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_UserQuizzes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-04-12 17:08:11.479 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserQuizzes_QuizId] ON [UserQuizzes] ([QuizId]);
2025-04-12 17:08:11.483 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetRoleClaims] ADD CONSTRAINT [FK_AspNetRoleClaims_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2025-04-12 17:08:11.486 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUserRoles] ADD CONSTRAINT [FK_AspNetUserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2025-04-12 17:08:11.490 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUser] ADD CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2025-04-12 17:08:11.494 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] ADD CONSTRAINT [FK_UserAnswers_UserQuizzes_UserId_QuizId] FOREIGN KEY ([UserId], [QuizId]) REFERENCES [UserQuizzes] ([UserId], [QuizId]) ON DELETE CASCADE;
2025-04-12 17:08:11.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250323182531_FixRelations', N'9.0.3');
2025-04-12 17:08:11.498 +07:00 [INF] Applying migration '20250406140048_UpdateUserModel'.
2025-04-12 17:08:11.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250406140048_UpdateUserModel', N'9.0.3');
2025-04-12 17:08:11.512 +07:00 [INF] Applying migration '20250412100412_AddRolesAndUserRoles'.
2025-04-12 17:08:11.525 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250412100412_AddRolesAndUserRoles', N'9.0.3');
2025-04-12 17:08:11.533 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:08:23.417 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:08:23.467 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:08:23.490 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:08:23.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:08:23.561 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:08:23.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:08:23.567 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:08:23.576 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 17:08:23.580 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:08:23.628 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:08:23.628 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:08:23.629 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:08:23.632 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:08:23.634 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:08:23.635 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:08:23.637 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:08:23.637 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 17:08:23.638 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:08:23.808 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:08:23.817 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Questions] AS [q]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:08:23.823 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Answers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:08:23.830 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:08:24.018 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 500), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = Boolean), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256), @p20='?' (DbType = Guid), @p21='?' (DbType = Int32), @p22='?' (Size = 500), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Size = 256), @p26='?' (DbType = Boolean), @p27='?' (Size = 50), @p28='?' (DbType = Boolean), @p29='?' (Size = 50), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTimeOffset), @p32='?' (Size = 256), @p33='?' (Size = 256), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (Size = 4000), @p38='?' (DbType = Boolean), @p39='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [Avatar], [ConcurrencyStamp], [DateOfBirth], [Email], [EmailConfirmed], [FirstName], [IsActive], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39);
2025-04-12 17:08:24.048 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (DbType = Boolean), @p4='?' (Size = 256), @p5='?' (Size = 256), @p6='?' (DbType = Guid), @p7='?' (Size = 4000), @p8='?' (Size = 50), @p9='?' (DbType = Boolean), @p10='?' (Size = 256), @p11='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Id], [ConcurrencyStamp], [Description], [IsActive], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5),
(@p6, @p7, @p8, @p9, @p10, @p11);
2025-04-12 17:08:24.090 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 34), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Size = 34)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId], [Discriminator])
VALUES (@p0, @p1, @p2),
(@p3, @p4, @p5);
2025-04-12 17:08:24.111 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 500), @p5='?' (Size = 255), @p6='?' (DbType = Guid), @p7='?' (Size = 500), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 500), @p11='?' (Size = 255), @p12='?' (DbType = Guid), @p13='?' (Size = 500), @p14='?' (DbType = Int32), @p15='?' (DbType = Boolean), @p16='?' (Size = 500), @p17='?' (Size = 255), @p18='?' (DbType = Guid), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = Boolean), @p22='?' (Size = 500), @p23='?' (Size = 255), @p24='?' (DbType = Guid), @p25='?' (Size = 500), @p26='?' (DbType = Int32), @p27='?' (DbType = Boolean), @p28='?' (Size = 500), @p29='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Quizzes] ([Id], [Description], [Duration], [IsActive], [ThumbnailUrl], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5),
(@p6, @p7, @p8, @p9, @p10, @p11),
(@p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23),
(@p24, @p25, @p26, @p27, @p28, @p29);
2025-04-12 17:08:24.133 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Guid), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Guid), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Guid), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Questions] ([Id], [Content], [IsActive], [QuestionType])
VALUES (@p0, @p1, @p2, @p3),
(@p4, @p5, @p6, @p7),
(@p8, @p9, @p10, @p11),
(@p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19);
2025-04-12 17:08:24.160 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 255), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (Size = 255), @p12='?' (DbType = Boolean), @p13='?' (DbType = Boolean), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (Size = 255), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (Size = 255), @p22='?' (DbType = Boolean), @p23='?' (DbType = Boolean), @p24='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Answers] ([Id], [Content], [IsActive], [IsCorrect], [QuestionId])
VALUES (@p0, @p1, @p2, @p3, @p4),
(@p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14),
(@p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24);
2025-04-12 17:08:24.196 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO UserQuizz (Id, UserId, QuizId, QuizCode, StartAt, FinishAt)
VALUES 
  (NEWID(), '31169d5e-5cf5-4100-a15d-4100dc23dabc', 'e68f937a-1208-4564-9957-1279fb900c41', 'MATH001', GETDATE(), NULL),
  (NEWID(), '0cde6b1c-550b-40d1-b2b5-5d081e197aa9', 'd0e18412-ddb3-4305-b813-1558bbc3ec8e', 'HIST001', GETDATE(), NULL);
2025-04-12 17:08:24.272 +07:00 [INF] User profile is available. Using 'C:\Users\hungp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-12 17:08:24.355 +07:00 [INF] Now listening on: http://localhost:5269
2025-04-12 17:08:24.359 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-12 17:08:24.360 +07:00 [INF] Hosting environment: Development
2025-04-12 17:08:24.360 +07:00 [INF] Content root path: C:\Users\hungp\Fsoft\ASP.NET CORE\web\api\QuizApp.WebAPI
2025-04-12 17:08:24.529 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 17:08:24.635 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 106.6235ms
2025-04-12 17:08:24.649 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 17:08:24.649 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 17:08:24.652 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 2.8574ms
2025-04-12 17:08:24.652 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 3.4419ms
2025-04-12 17:08:26.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 17:08:26.210 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 99.444ms
2025-04-12 17:11:07.111 +07:00 [INF] Application is shutting down...
2025-04-12 17:11:15.974 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:11:19.065 +07:00 [INF] Executed DbCommand (3,031ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [QuizApp_dev] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-04-12 17:11:19.126 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [QuizApp_dev];
2025-04-12 17:12:14.538 +07:00 [INF] Executed DbCommand (213ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [QuizApp_dev];
2025-04-12 17:12:14.686 +07:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [QuizApp_dev] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-04-12 17:12:14.709 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:12:14.715 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:12:14.741 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:12:14.797 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:12:14.809 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:12:14.816 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:12:14.834 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:12:14.843 +07:00 [INF] Applying migration '20250312110459_AddAllModelsWithRelationshippAndSeedingAllData'.
2025-04-12 17:12:14.894 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] uniqueidentifier NOT NULL,
    [Description] nvarchar(50) NOT NULL,
    [IsActive] bit NOT NULL,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2025-04-12 17:12:14.903 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Questions] (
    [Id] uniqueidentifier NOT NULL,
    [Content] nvarchar(max) NOT NULL,
    [QuestionType] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Questions] PRIMARY KEY ([Id])
);
2025-04-12 17:12:14.910 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quizzes] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(255) NOT NULL,
    [Description] nvarchar(500) NULL,
    [Duration] int NOT NULL,
    [ThumbnailUrl] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    CONSTRAINT [PK_Quizzes] PRIMARY KEY ([Id])
);
2025-04-12 17:12:14.914 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] uniqueidentifier NOT NULL,
    [FirstName] nvarchar(50) NOT NULL,
    [LastName] nvarchar(50) NOT NULL,
    [DateOfBirth] datetime2 NOT NULL,
    [Avatar] nvarchar(500) NULL,
    [IsActive] bit NOT NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-04-12 17:12:14.921 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] uniqueidentifier NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.928 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Answers] (
    [Id] uniqueidentifier NOT NULL,
    [Content] nvarchar(255) NOT NULL,
    [IsCorrect] bit NOT NULL,
    [IsActive] bit NOT NULL,
    [QuestionId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_Answers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Answers_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.935 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuizQuestion] (
    [QuizId] uniqueidentifier NOT NULL,
    [QuestionId] uniqueidentifier NOT NULL,
    [Order] int NOT NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_QuizQuestion] PRIMARY KEY ([QuizId], [QuestionId]),
    CONSTRAINT [FK_QuizQuestion_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_QuizQuestion_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.941 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] uniqueidentifier NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.945 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.949 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.956 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] uniqueidentifier NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.963 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RoleUser] (
    [RolesId] uniqueidentifier NOT NULL,
    [UsersId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_RoleUser] PRIMARY KEY ([RolesId], [UsersId]),
    CONSTRAINT [FK_RoleUser_AspNetRoles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RoleUser_Users_UsersId] FOREIGN KEY ([UsersId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.967 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserQuizz] (
    [UserId] uniqueidentifier NOT NULL,
    [QuizId] uniqueidentifier NOT NULL,
    [QuizCode] nvarchar(10) NOT NULL,
    [StartAt] datetime2 NULL,
    [FinishAt] datetime2 NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserQuizz] PRIMARY KEY ([UserId], [QuizId]),
    CONSTRAINT [FK_UserQuizz_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserQuizz_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:14.976 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserAnswers] (
    [UserQuizId] uniqueidentifier NOT NULL,
    [AnswerId] uniqueidentifier NOT NULL,
    [QuestionId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [QuizId] uniqueidentifier NOT NULL,
    [IsCorrect] bit NOT NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserAnswers] PRIMARY KEY ([UserQuizId], [AnswerId], [QuestionId]),
    CONSTRAINT [FK_UserAnswers_Answers_AnswerId] FOREIGN KEY ([AnswerId]) REFERENCES [Answers] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_UserAnswers_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_UserAnswers_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserAnswers_UserQuizz_UserId_QuizId] FOREIGN KEY ([UserId], [QuizId]) REFERENCES [UserQuizz] ([UserId], [QuizId])
);
2025-04-12 17:12:14.978 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Answers_QuestionId] ON [Answers] ([QuestionId]);
2025-04-12 17:12:14.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2025-04-12 17:12:14.986 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-04-12 17:12:14.988 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2025-04-12 17:12:14.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2025-04-12 17:12:14.994 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2025-04-12 17:12:14.998 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizQuestion_QuestionId] ON [QuizQuestion] ([QuestionId]);
2025-04-12 17:12:15.001 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoleUser_UsersId] ON [RoleUser] ([UsersId]);
2025-04-12 17:12:15.004 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_AnswerId] ON [UserAnswers] ([AnswerId]);
2025-04-12 17:12:15.007 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_QuestionId] ON [UserAnswers] ([QuestionId]);
2025-04-12 17:12:15.010 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_QuizId] ON [UserAnswers] ([QuizId]);
2025-04-12 17:12:15.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserAnswers_UserId_QuizId] ON [UserAnswers] ([UserId], [QuizId]);
2025-04-12 17:12:15.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserQuizz_QuizId] ON [UserQuizz] ([QuizId]);
2025-04-12 17:12:15.021 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [Users] ([NormalizedEmail]);
2025-04-12 17:12:15.025 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-04-12 17:12:15.031 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250312110459_AddAllModelsWithRelationshippAndSeedingAllData', N'9.0.3');
2025-04-12 17:12:15.033 +07:00 [INF] Applying migration '20250312184737_AddUserRoleModel'.
2025-04-12 17:12:15.068 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestion] DROP CONSTRAINT [FK_QuizQuestion_Questions_QuestionId];
2025-04-12 17:12:15.073 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestion] DROP CONSTRAINT [FK_QuizQuestion_Quizzes_QuizId];
2025-04-12 17:12:15.080 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestion] DROP CONSTRAINT [PK_QuizQuestion];
2025-04-12 17:12:15.747 +07:00 [INF] Executed DbCommand (664ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[QuizQuestion]', N'QuizQuestions', 'OBJECT';
2025-04-12 17:12:15.751 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[QuizQuestions].[IX_QuizQuestion_QuestionId]', N'IX_QuizQuestions_QuestionId', 'INDEX';
2025-04-12 17:12:15.756 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestions] ADD CONSTRAINT [PK_QuizQuestions] PRIMARY KEY ([QuizId], [QuestionId]);
2025-04-12 17:12:15.761 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRoles] (
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_UserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-04-12 17:12:15.765 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_RoleId] ON [UserRoles] ([RoleId]);
2025-04-12 17:12:15.769 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestions] ADD CONSTRAINT [FK_QuizQuestions_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE;
2025-04-12 17:12:15.773 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [QuizQuestions] ADD CONSTRAINT [FK_QuizQuestions_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE;
2025-04-12 17:12:15.776 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250312184737_AddUserRoleModel', N'9.0.3');
2025-04-12 17:12:15.778 +07:00 [INF] Applying migration '20250323182531_FixRelations'.
2025-04-12 17:12:15.813 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetRoleClaims] DROP CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId];
2025-04-12 17:12:15.818 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUserRoles] DROP CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId];
2025-04-12 17:12:15.821 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUser] DROP CONSTRAINT [FK_RoleUser_AspNetRoles_RolesId];
2025-04-12 17:12:15.826 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] DROP CONSTRAINT [FK_UserAnswers_Quizzes_QuizId];
2025-04-12 17:12:15.830 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] DROP CONSTRAINT [FK_UserAnswers_UserQuizz_UserId_QuizId];
2025-04-12 17:12:15.836 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [UserQuizz];
2025-04-12 17:12:15.843 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [UserRoles];
2025-04-12 17:12:15.852 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] DROP CONSTRAINT [PK_UserAnswers];
2025-04-12 17:12:15.856 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_UserAnswers_QuizId] ON [UserAnswers];
2025-04-12 17:12:15.860 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_UserAnswers_UserId_QuizId] ON [UserAnswers];
2025-04-12 17:12:15.868 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetRoles] DROP CONSTRAINT [PK_AspNetRoles];
2025-04-12 17:12:15.914 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[UserAnswers]') AND [c].[name] = N'UserQuizId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [UserAnswers] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [UserAnswers] DROP COLUMN [UserQuizId];
2025-04-12 17:12:15.921 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[AspNetRoles]', N'Roles', 'OBJECT';
2025-04-12 17:12:15.930 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUserRoles] ADD [Discriminator] nvarchar(34) NOT NULL DEFAULT N'';
2025-04-12 17:12:15.943 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] ADD CONSTRAINT [PK_UserAnswers] PRIMARY KEY ([UserId], [QuizId], [AnswerId], [QuestionId]);
2025-04-12 17:12:15.952 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Roles] ADD CONSTRAINT [PK_Roles] PRIMARY KEY ([Id]);
2025-04-12 17:12:15.959 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserQuizzes] (
    [UserId] uniqueidentifier NOT NULL,
    [QuizId] uniqueidentifier NOT NULL,
    [QuizCode] nvarchar(10) NOT NULL,
    [StartAt] datetime2 NULL,
    [FinishAt] datetime2 NULL,
    [Id] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_UserQuizzes] PRIMARY KEY ([UserId], [QuizId]),
    CONSTRAINT [FK_UserQuizzes_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_UserQuizzes_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-04-12 17:12:15.964 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserQuizzes_QuizId] ON [UserQuizzes] ([QuizId]);
2025-04-12 17:12:15.973 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetRoleClaims] ADD CONSTRAINT [FK_AspNetRoleClaims_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2025-04-12 17:12:15.980 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AspNetUserRoles] ADD CONSTRAINT [FK_AspNetUserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2025-04-12 17:12:15.986 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUser] ADD CONSTRAINT [FK_RoleUser_Roles_RolesId] FOREIGN KEY ([RolesId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2025-04-12 17:12:15.992 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserAnswers] ADD CONSTRAINT [FK_UserAnswers_UserQuizzes_UserId_QuizId] FOREIGN KEY ([UserId], [QuizId]) REFERENCES [UserQuizzes] ([UserId], [QuizId]) ON DELETE CASCADE;
2025-04-12 17:12:15.997 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250323182531_FixRelations', N'9.0.3');
2025-04-12 17:12:15.999 +07:00 [INF] Applying migration '20250406140048_UpdateUserModel'.
2025-04-12 17:12:16.009 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250406140048_UpdateUserModel', N'9.0.3');
2025-04-12 17:12:16.011 +07:00 [INF] Applying migration '20250412100412_AddRolesAndUserRoles'.
2025-04-12 17:12:16.022 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250412100412_AddRolesAndUserRoles', N'9.0.3');
2025-04-12 17:12:16.032 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:12:42.136 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:12:42.181 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:12:42.203 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:12:42.259 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:12:42.275 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:12:42.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:12:42.282 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:12:42.293 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 17:12:42.297 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:12:42.347 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:12:42.347 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-04-12 17:12:42.347 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-04-12 17:12:42.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-04-12 17:12:42.353 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-04-12 17:12:42.354 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-04-12 17:12:42.354 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-04-12 17:12:42.355 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-04-12 17:12:42.355 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-04-12 17:12:42.515 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:12:42.524 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Questions] AS [q]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:12:42.530 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Answers] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:12:42.562 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-04-12 17:12:42.737 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (Size = 500), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 256), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = Boolean), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256), @p20='?' (DbType = Guid), @p21='?' (DbType = Int32), @p22='?' (Size = 500), @p23='?' (Size = 4000), @p24='?' (DbType = DateTime2), @p25='?' (Size = 256), @p26='?' (DbType = Boolean), @p27='?' (Size = 50), @p28='?' (DbType = Boolean), @p29='?' (Size = 50), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTimeOffset), @p32='?' (Size = 256), @p33='?' (Size = 256), @p34='?' (Size = 4000), @p35='?' (Size = 4000), @p36='?' (DbType = Boolean), @p37='?' (Size = 4000), @p38='?' (DbType = Boolean), @p39='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [AccessFailedCount], [Avatar], [ConcurrencyStamp], [DateOfBirth], [Email], [EmailConfirmed], [FirstName], [IsActive], [LastName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39);
2025-04-12 17:12:42.764 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (DbType = Boolean), @p4='?' (Size = 256), @p5='?' (Size = 256), @p6='?' (DbType = Guid), @p7='?' (Size = 4000), @p8='?' (Size = 50), @p9='?' (DbType = Boolean), @p10='?' (Size = 256), @p11='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Id], [ConcurrencyStamp], [Description], [IsActive], [Name], [NormalizedName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5),
(@p6, @p7, @p8, @p9, @p10, @p11);
2025-04-12 17:12:42.812 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 34), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (Size = 34)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId], [Discriminator])
VALUES (@p0, @p1, @p2),
(@p3, @p4, @p5);
2025-04-12 17:12:42.832 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 500), @p5='?' (Size = 255), @p6='?' (DbType = Guid), @p7='?' (Size = 500), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (Size = 500), @p11='?' (Size = 255), @p12='?' (DbType = Guid), @p13='?' (Size = 500), @p14='?' (DbType = Int32), @p15='?' (DbType = Boolean), @p16='?' (Size = 500), @p17='?' (Size = 255), @p18='?' (DbType = Guid), @p19='?' (Size = 500), @p20='?' (DbType = Int32), @p21='?' (DbType = Boolean), @p22='?' (Size = 500), @p23='?' (Size = 255), @p24='?' (DbType = Guid), @p25='?' (Size = 500), @p26='?' (DbType = Int32), @p27='?' (DbType = Boolean), @p28='?' (Size = 500), @p29='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Quizzes] ([Id], [Description], [Duration], [IsActive], [ThumbnailUrl], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5),
(@p6, @p7, @p8, @p9, @p10, @p11),
(@p12, @p13, @p14, @p15, @p16, @p17),
(@p18, @p19, @p20, @p21, @p22, @p23),
(@p24, @p25, @p26, @p27, @p28, @p29);
2025-04-12 17:12:42.850 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Guid), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = Guid), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = Guid), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Questions] ([Id], [Content], [IsActive], [QuestionType])
VALUES (@p0, @p1, @p2, @p3),
(@p4, @p5, @p6, @p7),
(@p8, @p9, @p10, @p11),
(@p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19);
2025-04-12 17:12:42.875 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 255), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = Guid), @p6='?' (Size = 255), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = Guid), @p10='?' (DbType = Guid), @p11='?' (Size = 255), @p12='?' (DbType = Boolean), @p13='?' (DbType = Boolean), @p14='?' (DbType = Guid), @p15='?' (DbType = Guid), @p16='?' (Size = 255), @p17='?' (DbType = Boolean), @p18='?' (DbType = Boolean), @p19='?' (DbType = Guid), @p20='?' (DbType = Guid), @p21='?' (Size = 255), @p22='?' (DbType = Boolean), @p23='?' (DbType = Boolean), @p24='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Answers] ([Id], [Content], [IsActive], [IsCorrect], [QuestionId])
VALUES (@p0, @p1, @p2, @p3, @p4),
(@p5, @p6, @p7, @p8, @p9),
(@p10, @p11, @p12, @p13, @p14),
(@p15, @p16, @p17, @p18, @p19),
(@p20, @p21, @p22, @p23, @p24);
2025-04-12 17:12:42.886 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO UserQuizz (Id, UserId, QuizId, QuizCode, StartAt, FinishAt)
VALUES 
  (NEWID(), '31169d5e-5cf5-4100-a15d-4100dc23dabc', 'e68f937a-1208-4564-9957-1279fb900c41', 'MATH001', GETDATE(), NULL),
  (NEWID(), '0cde6b1c-550b-40d1-b2b5-5d081e197aa9', 'd0e18412-ddb3-4305-b813-1558bbc3ec8e', 'HIST001', GETDATE(), NULL);
2025-04-12 17:12:42.971 +07:00 [INF] User profile is available. Using 'C:\Users\hungp\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-12 17:12:43.045 +07:00 [INF] Now listening on: http://localhost:5269
2025-04-12 17:12:43.048 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-12 17:12:43.049 +07:00 [INF] Hosting environment: Development
2025-04-12 17:12:43.049 +07:00 [INF] Content root path: C:\Users\hungp\Fsoft\ASP.NET CORE\web\api\QuizApp.WebAPI
2025-04-12 17:12:43.237 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.html - null null
2025-04-12 17:12:43.384 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.html - 200 null text/html;charset=utf-8 149.6527ms
2025-04-12 17:12:43.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - null null
2025-04-12 17:12:43.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/index.js - null null
2025-04-12 17:12:43.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/_framework/aspnetcore-browser-refresh.js - 200 13748 application/javascript; charset=utf-8 1.9949ms
2025-04-12 17:12:43.402 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/index.js - 200 null application/javascript;charset=utf-8 2.813ms
2025-04-12 17:12:44.369 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - null null
2025-04-12 17:12:44.473 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.1532ms
2025-04-12 17:12:58.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5269/roles - null null
2025-04-12 17:12:58.477 +07:00 [WRN] Failed to determine the https port for redirect.
2025-04-12 17:12:58.537 +07:00 [INF] Executing endpoint 'QuizApp.WebAPI.Controllers.RoleController.GetAllRoles (QuizApp.WebAPI)'
2025-04-12 17:12:58.579 +07:00 [INF] Route matched with {action = "GetAllRoles", controller = "Role"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRoles() on controller QuizApp.WebAPI.Controllers.RoleController (QuizApp.WebAPI).
2025-04-12 17:12:58.850 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [r].[Description], [r].[IsActive]
FROM [Roles] AS [r]
2025-04-12 17:12:58.879 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[QuizApp.Business.ViewModels.RoleViewModel, QuizApp.Business, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-04-12 17:12:58.953 +07:00 [INF] Executed action QuizApp.WebAPI.Controllers.RoleController.GetAllRoles (QuizApp.WebAPI) in 364.4896ms
2025-04-12 17:12:58.954 +07:00 [INF] Executed endpoint 'QuizApp.WebAPI.Controllers.RoleController.GetAllRoles (QuizApp.WebAPI)'
2025-04-12 17:12:58.968 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5269/roles - 200 null application/json; charset=utf-8 493.4849ms
